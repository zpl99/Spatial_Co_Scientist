Discovering Functional Zones Using Bus Smart Card Data and 
Points of Interest in Beijing 

Haoying Han, Zhejiang University 

Xiang Yu, Zhejiang University 

Ying Long, Beijing Institute of City Planning 

Abstract Cities comprise various functional zones, including residential, educational, commercial 
zones, etc. It is important for urban planners to identify different functional zones and understand 
their spatial structure within the city in order to make better urban plans. In this research, we used 
77976010 bus smart card records of Beijing City in one week in April 2008 and converted them into 
two-dimensional  time  series  data  of  each  bus  platform,  Then,  through  data  mining  in  the  big 
database  system  and  previous  studies  on  citizens’  trip  behavior,  we  established  the  DZoF 
(discovering zones of different functions) model based on SCD (smart card Data) and POIs (points 
of interest), and pooled the results at the TAZ (traffic analysis zone) level. The results suggested 
that  DzoF  model  and  cluster  analysis  based  on  dimensionality  reduction  and  EM  (expectation-
maximization)  algorithm  can  identify  functional  zones  that  well  match  the  actual  land  uses  in 
Beijing.  The  methodology  in  the  present  research  can  help  urban  planners  and  the  public 
understand  the  complex  urban  spatial  structure  and  contribute  to  the  academia  of  urban 
geography and urban planning. 

Key Words smart card data (SCD); points of interest (POI); functional zone; human mobility; Beijing 

1 Introduction 

Ae city, whether from a material or a social level, is a complex space system (Lai and Han 2009; Batty 

2009), and the study based on the microscopic objects is an important way to understand the operation 

of this complex system. Due to the limitation of data, the classic study of urban elements, organization 

and structure often limited in large scale (such as townships or  traffic analysis zones). But with the 

advent of the era of big data, Ubiquitous personal volunteered data have provided a new channel to 

describe and understand the structure of urban space (Batty 1990). 

The big data, which has been a big concern in all research areas, mainly consists of bus smart card 

records, flight records, bank card records, twitter records, mobile phone records and so on, which are 

provided  by  Location  Based  Services(LBS)  like  Global  System  for  Mobile(GSM),  Global  Positioning 

System(GPS), Social Networking Services(SNS) and Wi-Fi. These data can be formed into a log of citizens’ 

trip behavior (Neuhaus 2009), and can be used to real-time monitor the urban activities (Calabrese and 

Ratti 2006), analyze the intensity and temporal distribution of urban activities (Ratti et al.2006) and 

study human mobility pattern in urban(Gonzalez et al.2008). 

Human Mobility has a close relationship with urban spatial structure (Goodchild and Janelle 1984; 

1 

 
Goodchild et al.1993). In existing researches, urban spatial structure is often used by researchers to 

study human activity, analyze citizens’ trip behavior and explore the impact of urban spatial structure 

on people’ traveling(Jiang et al.2009). For example, by studying the structure of urban land-use, urban 

commuter model was studied (Hamilton 1982), and the impact of the spatial structure on residents’ 

commuting behavior was analyzed (Liu and Wang 2011; Wang and Chai 2009). However, few studies 

have discussed how to use the existing data of urban human activity for relevant studies of urban spatial 

structure which can be very important. Because along with the development of the city, urban land use 

and spatial structure are changing rapidly and the city is developing from the previous single-center 

model to a multi-center model (Anas et al.1998; McMillen and McDonald 1997). The immediate and 

clear division of urban functional areas can give inspiration to city planners on the future planning, and 

validate the land use planning of the past. However, traditional studies on land use and urban spatial 

structure  are  mainly  based  on  remote  sensing  data(Lu  and  Weng  2005;  Xiao  et  al.2006)  which  is 

expensive  and  lacks  timely  updates,  thus  cannot  meet  the  needs  of  urban  planners  and  scholars. 

Therefore, it will become a top research to use the vast amounts of data provided by LBS to analyze 

human activity and carry out research of urban spatial structure. 

In  existing  researches  of  urban  spatial  structure,  GSM  and  GPS  data  is  most  widely  used.  For 

example, Qi et al. used GPS information of driving taxis in Hangzhou to analyze the relationship between 

passengers’ patterns of getting on and off and the social function of urban areas (Qi et al.2011). Based 

on one week’s GPS data from more than 6600 driving taxis in Shanghai, Liu et al. used the “source-sink” 

model  proposed  by  Pulliam  to  characterize  the  daily  traffic  model, and  then  to  analyze  the  present 

situation of land use in Shanghai(Liu et al.2012; Pulliam 1988). Yuan used GPS information of taxi and 

urban POI (Point of Interests, POIs) data to establish a semantic model and study the functional partition 

of different regions of the city with the help of data mining method(Yuan et al.2012). 

In recent years, SCD (Smart Card Data) has gradually been used in the study of urban as a kind of 

large-scale  data  with  spatiotemporal  labels.  Sun  analyzed  passengers’  spatio-temporal  density  and 

activity tracks based on the SCD data of Singapore (Sun et al.2012). Joh and Hwang used 10 million 

pieces of SCD data of Seoul metropolitan area to analyze the feature of cardholders’ routes and urban 

land  use  (CH  and  Hwang  2010).  Long  et  al.  analyzed  the  relationship  between  working  and  living 

locations as well as the feature of commuting direction using SCD data of Beijing (Long et al.2012). In 

addition, some researchers have begun to use POIs (Point of Interests) data in the study of urban space. 

POIs are some basic locations of the city and mainly include buildings with landmark function in the 

local area. Since to a large extent, POIs can enhance the ability to describe the physical location and 

improve the accuracy and speed of the geographical location, it has been widely applied to the study 

of  urban  spatial  structure.  According  to  the  significant  degree  of  difference,  Zhao  et  al.  extracted 

hierarchical landmarks from POI data, and obtained the hierarchical knowledge space that can be used 

in intelligent route guidance (Zhao et al.2011). Since LBS technology is featured with high positioning 

accuracy, interactive feature and huge amount of data while POI has obvious advantages in identifying 

geographical  pattern,  its  id  of  great  significance  to  integrate  the  two  in  the  study  of  urban  spatial 

2 

 
structure. 

Information obtained by LBS technology is still in its original state, data. Because the amount of 

data  is  too  large,  it  is  usually  hard  to  extract  useful  information  using  the  traditional  data  analysis 

method  and  technology  (Witten  and  Frank  1999).  In  recent  years,  with  the  rapid  development  of 

computer  techniques,  database  management  system  and  artificial  intelligence  technology  gradually 

became  mature  and  their  combination  has  contributed  to  produce  a  new  technology,  data  mining, 

which realizes the effective characterization and analysis of large data(Tan et al 2006). Scholars also 

have  begun  to  try  to  use  the  classification,  association  analysis  and  cluster  analysis  in  data  mining 

technique to discovery potentially and useful information from vast amounts of GIS data. For the past 

few years, cluster analysis has been widely used at home and abroad, to analyze daily activities of urban 

people like working, living, attending school, travelling and shopping based on GPS, GSM, SCD and other 

data (Jiang et al.2012; Sun et al.2011), and thereby to identify the space-time structure of the city (Jiang 

et al 2012) as well as the immediate and detailed information of urban land use (Pan et al.2013). 

In actual studies, the data provided by LBS technology is often continuous in time and such data 

are called time-series data (Agrawal et al.1993). Time-series data are usually massive data that may get 

a lot of noise in it and have poor efficiency or even impossibility in direct cluster analysis of raw data. 

Therefore, dimensionality reduction and feature transformation for multi-dimensional time series data 

is  needed.  Discrete  Fourier  Transform  (DFT)  (Agrawal  et  al.1993),  Principal  Component  Analysis 

(PCA)(Sun et al.1994), Singular Value Decomposition (SVD) (Korn et al.1997) are some commonly-used 

methods for this. Cluster analysis of time series data can be similarity-based, feature-based, model-

based and segmentation-based. And the choice mainly depends on the type of application data and the 

purpose of cluster analysis (Jiang et al.2005). Traditional cluster analysis is mostly vector-based which 

cannot well solve the problem of time series clustering. In recent years, model-based clustering was 

more used in the study on clustering analysis of time series. 

This study is to establish the model of Discovering Zones of different Functions (DZoF) based on 

the original data of SCD and POIs. In this model, the bus platform traffic data model was developed. We 

have used the model-based algorithm —expectation maximization(EM) in cluster analysis of 8691 bus 

platforms  in  Beijing,  as  well  as  built  the  pattern  recognition  rules  of  SCD  data  mining  based  on  the 

traditional studies of residents’ commuting behavior, general cognition and POIs model, and conducted 

a  functional  interpretation  of  clusters  resulted  from  previous  clustering  analysis.  According  to  DZoF 

model,  this  study  ultimately  determined  the  function  of  each  bus  platform  in  Beijing,  and  made  a 

summary on a scale of TAZ to achieve recognition of the function of different regions. In order to verify 

the  validity  of  DZoF(Discovering  Zones  of  different  Functions)  model  in  identifying  the  result,  the 

chapter also made a contrastive analysis between the land-use status map of the overall urban planning 

of Beijing(2004-2020) and Google map of the area. 

The methods section of this chapter gives a definition of DZoF model used for urban functional 

identification, and introduces the specific method to use DZoF model in the cluster analysis of multi-

dimensional  time  series,  and  ultimately  identify  the  practical  meaning  of  clustering  result.  In  the 

3 

 
application  section,  Beijing  is  taken  for  an  example,  a  continuous  week’s  bus  smart  card  records  of 

Beijing  in  April  2008  and  urban  POI  data  are  used  to  identify  each  functional  area  of  the  city  while 

experimental result is also tested. The final part is about the summary and discussion of the entire study. 

2 Overview of study area and explanation of data 

2.1 Overview of study area 

The study area of this paper is Beijing city area, with a total area of 16,410 square kilometers and a 

permanent population of 20,693,0001. Beijing has a modern and tridimensional transportation network 

which ramifies all over the city. Till 2008, there are 17,000 km bus-lines and 20600 operating vehicles, 

8 lines of rail transit with 200 km of operating mileage, and 66,000 operating taxis2. 

2.2 Data 

2.2.1 Lines and platforms of buses in Beijing  

The main data of this study mainly is a continuous week (April 7th-April 13th)’s bus smart card records 

of Beijing in 2008 (not including smart card records of rail transit), which covers more than 600 bus lines 

(a total of 1,287 inbound and outbound records which contains 566 records of one-ticket lines and 721 

of segmented-pricing lines), and about 37,000 bus stops3 and 8,691 bus platforms. Figure 1 shows the 

distribution of bus platforms in Beijing. 

1The data is from the 2012 Statistical Yearbook of Beijing(http://www.bjstats.gov.cn). 

2 The data is from the statistics on Beijing Transportation website(http://www.bjbus.com/) 

3 It is not the number of but platforms, but the sum of bus stops of all bus lines. A bus stop is the name 
of a platform in a bus line. 

4 

 
                                                             
 
 
Fig.1 The bus platforms of the Beijing Metropolitan Area (BMA) 

2.2.2 Smart Card Data  

Due to the non-technical factors, the smart card data used in this study does not include those of bus 

and rail transit lines of Xianglong Company. The basic information that each record contains includes: 

card-swiping time and location of each card holder (the location is represented by the number of the 

line  and  the  stop),  type  of  card  (ordinary,  student  or  staff  card),  and  transaction  sequence  number 

(representing  the  cumulative  number  of  a  cardholder’s  swiping  card),  driver  number  and  vehicle 

number. There are 77,976,010 card-swiping records in the week. 

Beijing bus lines have two ways of pricing: (1)one-ticket lines with short distance mostly located in 

the city centre and SCD of this kind only records passengers’ pick-up time rather than drop-off time; 

(2)segmented-pricing  lines,  usually  with  long  route  and  both  terminal  and  starting  station  locating 

outside  the  Fifth  Beltway.  SCD  of  this  kind  records  the  complete  spatial-temporal  information  of 

cardholders’ behavior of card swiping. In order to collect both pick-up and drop-off flow, most of the 

data used in this study is of segmented-pricing lines, which has 37,649,207 records in total. 

5 

 
 
 
 
2.2.3 Point of interest 

The POI data used in this study is collected from Beijing in 2010 and has a total of 113,810 records, 
obtaining from Sina Micro-blog Geographic Service Platform 4(as shown in figure 2). 

Fig. 2 the POIs of the Beijing Metropolitan Area (BMA)         

The classification and explanation of POIs is shown in table 1. 

Table 1 Codes, Categories and Description of POIs 

1st level 
code 

Classification of 
POI 

Explanation 

1st level 
code 

Classification 
of POI 

Explanation 

01 

Automobile 
service 

02 

Vehical sales 

03 

automobile 
maintenance 

Oil station, gas station, 
automobile care, car-
washing station, car 
renting, etc. 

11 

VW, Toyota, Honda, 
GM and BMW sales. 

12 

automobile integrated 
maintenance, 
maintenance of VM, 
Honda, etc. 

13 

Place of 
interest 

Business and 
residential 
area 

Government 
agency and 
social 
organization 

Park plaza, scenic spot 

Industrial park, , residential 
area, etc. 

Government agency, foreign 
institution, social 
organization, etc. 

4 Sina Micro-blog LBS Platform, officially opened in 2012 April, provides third party developers with free 
access to Sina location service. its most outstanding part are the two functions that base on user and 
POI. Related interface based on user can allow users to obtain individual’s dynamic time line. and POI 
interface is based on a specific location.(Http://open.weibo.com/) 

6 

 
 
                                                             
04 

Motorcycle 
service 

Motorcycle sales and 
maintenance 

14 

05 

Catering service 

06 

Shopping 
service 

07 

Life service 

Chinese and foreign 
restaurants, fast- food 
restaurant, coffee 
house, etc. 

15 

Shopping mall, 
convenience shop, 
household appliance 
store, supermarket, 
home furnishing store, 
etc. 

16 

Travel agency, post 
office, logistic express,  
talent market, electric 
power office, beauty 
salon, etc. 

17 

Science, 
educational 
and cultural 
service 

Museum, library, cultural 
center, school, research 
institution, etc. 

Transport 
facility 

Airport, train station, harbor 
and wharf, subway station, 
etc. 

Finance and 
insurance 
service 

Bank, insurance company, 
securities company, finance 
corporation. 

Corporation 

Well-known enterprise, 
company, factory, 
agricultural base, etc. 

Sport and 
leisure service 

Stadium, 
entertainment venue, 
leisure facility, movie 
theater, etc. 

Health care 
service 

General and specific 
hospital, clinic, etc. 

Accommodation 
service 

Hotel, guest house. 

08 

09 

10 

18 

19 

Road 
affiliated 
facility 

Toll station, service center of 
gas station. 

Address 
information 

Transport-related place 
name, city center. 

20 

Public facility 

Newsstand, public toilet, 
shelter. 

The amount of each category of POI is shown in Figure 3.

Fig. 3 POIs counts for each category in 2010 

3 Methods 

In this study, the identification of city functional regions was achieved mainly through the construction 

of DZoF (Discovery Zones of different Functions) model. 

First, by using SQL Server, acquire and pre-process SCD and POIs data, Platform Flow model (PF 

model)  and  POIs  data  model  were  built.  And  by  using  the  cluster  analysis  techniques  of  multi-

dimensional  data,  we  designed  the  feature  of  one  week’s  traffic  data,  use  the  EM  algorithm  for 

clustering analysis and get clusters. And again, the function of the result clusters was interpreted in 

three aspects: POI model, feature of residents’ commuting behavior and residents’ general cognition; 

the function of each bus platform was defined. Public management, science, educational and cultural 

7 

 
 
 
service, residential, commercial and entertainment function, and scenic spot are some main functions. 

The process flow of this study is as shown in figure 4. 

Fig. 4 The process flow diagram of this chapter 

3.1 Blind clustering of bus platforms 

3.1.1 Pre-processing of SCD  

Flow statistics collected according to bus lines compose the raw data of the study, which has a problem 

of having many bus lines going through the same platform. By using SQL Server, statistics of different 

bus lines which go through the same platform were added together, resulting in the flow statistic of 

each bus platform, fx,y,z(x is Platform ID, x=1,2,…,8691; y represents date, y=7,8,…,13; z represents time, 

z=0,1…,23). 

3.1.2 PF (Platform flows) data model 

For each bus platform, an inflows vector was built (X7,0, X7,1, …, Xi,j, …, X13,23). Xi,j represents the number 

of passengers that have been picked up on the platform in the jth hour on April ith 2008 (i=7, 8,…,13; j=0, 

1…,23). While at the same time, a outflows vector was built (Y7,0, Y7,1,…,Yi,j,…,Y13,23). Yi,j represents the 

number  of  passengers  that  have  been  dropped  off  on  the  platform  in  the  jth  hour  on  April  ith 

8 

 
 
2008( i=7,8,…,13, j=0,1…,23). 

By transforming the data into two-dimensional time-series data, making dimensionality reduction 

and constricting a linear function, the study uses a ratio of the number of pick-up passengers to the 

number of drop-off ones at different time as an index for comparing the similarity of platform flows: 

                                              Zij =

Xi,j
Yi,j

           .                                                                (1) 

 (Xi,j represents the number of passengers that have been picked up on the platform in the jth hour on 

April ith; Yi,j represents the number of passengers that have been dropped off on the platform in the jth 

hour on April ith) 

Thus, for each platform, a PF model was built (Z7,0, Z7,1,…, Zi,j,…,Z13,23). Zi,j represents the ratio of 

passengers that have been picked up on the platform in the jth hour on April ith. 

3.1.3 Data dimensionality reduction 

From the statistics of average inflows and outflows in various departure hours of a week (as shown in 

Figure 5), it was observed that people’s trip hour converges on 5:00-23:00 (above the red line in Figure 

5). After removing redundant features of the raw data, PF data decreased from 168d to 126d. 

Fig. 5 The average passenger flows in various departure hours of a week 

Next, we drew a graphics of the inflows in various departure hours of one week of the No.1934 

platform  (Figures  6,  7).  From  the  graphics,  it  is  observed  that  statistics  of  weekdays  have  strong 

consistency while statistics of two days in weekends have strong consistency.   

9 

 
 
Fig. 6 The inflows in various departure hours on weekdays of No.1934 platform   

Fig. 7 The inflows in various departure hours on the weekend of No.1934 platform   

Then, correlation analysis of statistics of platform flows on weekdays and weekends was made and 

Pearson correlation coefficient between each two attributes was calculated. The results show that the 

flow data in the same hour of different weekdays was significantly correlated at 0.01 (bilateral) levels 

Therefore，we designed the feature of flow data and calculated the arithmetic mean of statistics of 

weekdays and weekends.  

3.1.4 Expectation-Maximization (EM) algorithm 

In this paper, expectation maximization (EM) algorithm was chosen as the method for clustering on bus 

platforms. In this algorithm, for each object, its probability of each distribution is calculated, which is 

equivalent to a procedure in K-means algorithm that assigns each object to a cluster; and maximum 

likelihood  estimating  in  EM  algorithm  is  equivalent  to  cluster’s  centered  calculating  in  K-means 

algorithm. But compared with the K-means algorithm, EM algorithm is more general and can be applied 

to different classes and find clusters of different sizes. At the same time, EM algorithm is model-based, 

10 

 
 
 
 
which can eliminate the complexity of data association. 

EM  algorithm  is  a  clustering  method  that  uses  hybrid  model.  The  principle  of  model-based 

clustering  is  to  assume  that  data  is  obtained  by  a  statistical  process  which  can  be  classified  with  a 

statistical model. Therefore, a statistical model that best fits the data can be found and parameters of 

the model can be estimated from data. The basic process of EM algorithm can be summarized as: first, 

do the initial guess of parameters; then, iteratively refine the estimation. Estimation of parameters in 

the  algorithm  is  carried  out  by  using  the  maximum  likelihood  method.  Probability  density  of  points 

generated from one-dimensional Gaussian distribution is: 

  prob(χ|Θ) = Π 1
σ√2π
If  the  value  of  σ  and  μ  is  unknown,  then  it  requires  a  process  to  estimate  them,  which  means 

2σ2           .                                                                                 (2) 

e−

(xi−μ)2

choosing σ and μ that can maximize the formula above. This way of estimating model parameters is 

called maximum likelihood estimation in statistics. 

3.2 Identification of urban functional areas 

3.2.1 Collection of POI data of bus service area 

In this study, service area of bus platform is defined the area within a radius of 500 meters (Huang 2006) 

around  the  bus  platform.  For  each  bus  platform,  the  number  of  POI  data  of  different  categories  is 

calculated, indicated as . i is platform ID(i=1,2,…,8691); j is 1st level code of POI (j=1,2,…,20). 

3.2.2 Data standardization 

Among POIs data of Beijing in 2010, there are 90,819 records of catering service POI, 116,499 shopping 

service  POIs  and  only  4,575  POIs  of  place  of  interest.  In  the  process  of  statistical  analysis,  function 

identification will be affected by difference in POIs’s magnitude. 

Therefore, original POIs data need to through Z-Score standardization according to the following 

formula: 

                      𝑥ij

∗ = {

xi,j−xj̅
Sj

      (Sj ≠ 0)

0                   (Sj = 0)

  (i = 1,2, … , n; j = 1,2, … , m)     . 

3.2.3 POI data model 

                                                                          (3) 

For each platform, a POIs feature vector, FD (Frequency Density) model was built, denoted as fd1, fd2, …, 

fd20. 

fdi denotes the frequency density of the ist category of POI in platform service area R: 

11 

 
 
fdi =

𝐓𝐡𝐞 𝐬𝐭𝐚𝐧𝐝𝐚𝐫𝐝𝐢𝐳𝐞𝐝 𝐧𝐮𝐦𝐛𝐞𝐫 𝐨𝐟 𝐭𝐡𝐞 𝐢𝐬𝐭 𝐜𝐚𝐭𝐞𝐠𝐨𝐫𝐲 𝐨𝐟 𝐏𝐎𝐈 𝐨𝐟 𝐭𝐡𝐞 𝐩𝐥𝐚𝐭𝐟𝐨𝐫𝐦 
𝐓𝐡𝐞 𝐚𝐫𝐞𝐚 𝐨𝐟 𝐩𝐥𝐚𝐭𝐟𝐨𝐫𝐦 𝐬𝐞𝐫𝐯𝐢𝐜𝐞 𝐚𝐫𝐞𝐚𝐫 𝐫

                           (4)      

Similarly,  for  each  platform,  another  POI  feature  vector,  CR  (Category  Ratio)  model  was  built, 

denoted as cr1, cr2,... , cr20. 

cri denotes the percentage of the ist category of POI in all POI of the area: 

cri =

𝐓𝐡𝐞 𝐬𝐭𝐚𝐧𝐝𝐚𝐫𝐝𝐢𝐳𝐞𝐝 𝐧𝐮𝐦𝐛𝐞𝐫 𝐨𝐟 𝐭𝐡𝐞 𝐢𝐬𝐭 𝐜𝐚𝐭𝐞𝐠𝐨𝐫𝐲 𝐨𝐟 𝐏𝐎𝐈 𝐨𝐟 𝐭𝐡𝐞 𝐩𝐥𝐚𝐭𝐟𝐨𝐫𝐦 

|𝐓𝐡𝐞 𝐧𝐮𝐦𝐛𝐞𝐫 𝐨𝐟 𝐏𝐎𝐈 𝐢𝐧 𝐩𝐥𝐚𝐭𝐟𝐨𝐫𝐦 𝐬𝐞𝐫𝐯𝐢𝐜𝐞 𝐚𝐫𝐞𝐚𝐫 𝐫|

                             (5)   

3.2.4 Urban functional identification 

The study used traditional rules of data acquisition, and then used these rules for pattern recognition 

of large data, which was to recognize the function of the clusters obtained from blind clustering of bus 

platforms  by  using  the  correlation  between  residents’  trip  time  and  purpose,  residents’  general 

cognition and POI model. 

Function recognition is a comprehensive application of the following three methods: 

(1)Calculate each cluster’s FD (Frequency Density) model, and sort the results (achieving internal 

ranking);  second,  calculate  each  cluster’s  CR  (Category  Ratio)  model  and  sort  the  results  (achieving 

external ranking). 

(2)Identify the feature of flows in trip hours of each cluster. 

(3)Residents’  general  cognition.  People  usually  are  aware  of  the  function  of  some  well-known 

places, such as the Imperial Palace, Chinese Silicon Valley and Beihai Park. 

4 Results 

4.1 Clustering results of bus platforms and Summary at TAZ scale 

After clustering of bus stops based on flow data by using EM algorithm in the software Weka, 6 different 

clusters were obtained (each bus stop only belongs to one cluster, C0-C5). Next, according to the spatial 

subordination between platforms and traffic analysis zones (TAZ), statistical work was carried out for 

each traffic analysis zone, and the cluster that exists most in a TAZ represents the category of the TAZ. 

The clustering results were summarized at TAZs scale (sparse for unclassified area), as shown in figure 

8. 

12 

 
Fig.8 Functional regions of the Beijing 

4.2 Function Identification 

4.2.1 Construction of POIs model 

According to the results of blind clustering of platforms in 4.1, a POIs model was built for each cluster 

(C0-C5), and the value of FD (Frequency Density) and RCR (Rank of Category) of each functional region 

were calculated, as shown in Table 2. 

Table 2 Overall POI feature vector and ranking of functional regions by DZoF (the color of a cell indicates its value) 

POI 

Automobile service 

Vehicle sales 

Automobile 
maintenance 

Motorcycle service 

Catering service 

Shopping service 

Life service 

C0 

FD 

-0.077 

-0.075 

-0.005 

0.063 

-0.186 

-0.173 

-0.156 

RCR 

7 

6 

3 

1 

18 

16 

13 

C1 

FD 

-0.025 

0.034 

0.032 

0.006 

-0.109 

-0.141 

-0.157 

RCR 

6 

2 

3 

5 

13 

16 

18 

C2 

FD 

0.073 

-0.006 

0 

0.057 

0.142 

0.039 

0.099 

13 

C3 

FD 

0.03 

0.089 

0.119 

0.085 

0.149 

0.214 

0.216 

RCR 

19 

14 

9 

15 

7 

3 

2 

C4 

FD 

0.021 

0.073 

0.084 

0.041 

0.205 

0.107 

0.114 

RCR 

18 

13 

12 

16 

5 

11 

10 

C5 

FD 

-0.02 

-0.063 

-0.012 

0.117 

-0.095 

-0.051 

-0.026 

RCR 

6 

12 

4 

1 

18 

10 

7 

RCR 

9 

19 

18 

13 

1 

15 

5 

 
 
 
Sport and leisure 
service 

Health care service 

Accommodation 
service 

Place of interest 

Business and 
residential area 

Government agency 
and social organization 

Science, educational 
and cultural service 

Transport facility 

Finance and insurance 
service 

Corporation 

Road affiliated facility 

Address information 

Public facility 

-0.16 

-0.106 

-0.183 

-0.129 

-0.073 

-0.124 

-0.202 

-0.173 

-0.214 

-0.12 

-0.008 

0.015 

-0.102 

14 

9 

17 

12 

5 

11 

19 

15 

20 

10 

4 

2 

8 

-0.114 

0.013 

-0.14 

-0.076 

-0.094 

-0.18 

-0.173 

-0.076 

-0.057 

-0.144 

-0.039 

0.039 

-0.068 

14 

4 

15 

11 

12 

20 

19 

10 

8 

17 

7 

1 

9 

0.124 

0.06 

0.075 

0.042 

0.072 

0.082 

0.068 

0.111 

0.114 

0.075 

0.031 

0.016 

-0.048 

2 

12 

8 

14 

10 

6 

11 

4 

3 

7 

16 

17 

20 

0.095 

0.187 

0.187 

10 

5 

4 

0.307 

0.056 

0.18 

-0.033 

20 

0.167 

1 

15 

6 

8 

-0.057 

-0.004 

-0.034 

11 

3 

8 

-0.075 

15 

0.152 

0.135 

0.067 

0.089 

0.094 

0.069 

0.092 

0.084 

0.214 

6 

8 

18 

13 

11 

17 

12 

16 

1 

0.07 

14 

-0.018 

0.224 

0.22 

0.17 

0.216 

0.117 

-0.036 

0.021 

-0.036 

2 

3 

7 

4 

9 

20 

17 

19 

-0.11 

-0.095 

-0.066 

-0.105 

0.017 

-0.068 

-0.079 

-0.044 

5 

20 

17 

13 

19 

2 

14 

16 

9 

4.2.2 The feature of residents’ traffic flows  

The features of flows (pick-up and drop-off number) on weekdays and weekends in a week of clusters 

clustered by EM are shown as Figure 9-12.  

Fig.9 The inflows on weekdays of clusters clustered by EM 

14 

 
 
Fig. 10 The outflows on weekdays of clusters clustered by EM 

Fig. 11 The inflows on weekends of clusters clustered by EM 

Fig. 12 The outflows on weekends of clusters clustered by EM 

4.2.3 Identification of results 

Functions of clustering results of EM algorithm were identified as followed: 

a. Mature residential area (C0)    

Regions of this kind have got widely distributed residential POI and a high proportion of serviced 

apartment(FD=-0.073), while services for residents’ life like health care, accommodation and education 

service  is  distributed  in  equilibrium,  which  have  shown  the  feature  of  POI  distribution  of  a  typical 

residential area. 

At the same time, through the analysis of flow data of the week, it was observed that flows of 

15 

 
 
 
 
departure in weekdays of the region peaked in the early morning(7-8 o’clock in morning rush hours) 

and the peak of flows of return appeared in the evening (17-19 o’clock in afternoon rush hours), which 

have shown the trip mode of a typical residential area. 

b. developing area(C1)  

POIs of regions of this kind are mostly of motorcycle and car service category where 4S shops, 

motorcycle sales, automobile and motorcycle maintenance stations are relatively widespread and the 

surrounding infrastructure need to be improved. 

c. Scenic spots (C2)    

Places of interest account for the highest proportion of POI in these regions. Compared with other 

kinds, regions of this kind have higher FD(Frequency Density) value(0.042) and are high-ranked in the 

external  ranking  of  catering  and  accommodation  service  for  tourists.  And  there  is  little  difference 

between traffic flows of weekdays and weekends in these regions. Flows were relatively averaged in 

different hours of a day and there were usually higher flows in weekends than weekdays. 

d. Commercial and entertainment area (C3)   

Regions  of  this  kind  have  high  FD  value  in  catering  service,  shopping  service  and  life  service, 

respectively  ranking  second,  first  and  first  in  all  clusters.  Meanwhile,  the  regions  contain  a  high 

proportion of POI of catering service (with higher CR value. For example, clusters of catering service 

rank the 7th in CR value while clusters of shopping service rank the third). And form the above figures 

of traffic flows, it was observed that the peak of drop-off flows appeared in afternoon rush hours (17:00-

19:00) on weekdays in these regions, which have shown that many people shopped and took part in 

recreational activities in these areas. 

e. Area of public management, science, education and culture (C4)   

Regions  of  this  kind  have  the  highest  percentage  of  POI  of  government  agency  and  social 

association which have higher FD value (0.22) compared with other regions. POI of this kind account 

for  9.7%  of  POI  in  these  regions,  ranking  second  in  RCR  value.  And  there  are  many  POI  of  science, 

educational and cultural service in these regions where transport facility, sport and leisure service and 

accommodation service are high-ranked in the external ranking. 

f. New residential area (C5)  

Regions  of  this  kind  have  similar  POI  data  structure  with  C0.  While  ranking  according  to  the 

percentage that each kind of POI account for, residential service ranks the 5th, health care service ranks 

the  third  and  life  service  ranks  the  7th  in  these  regions,  which  have  shown  the  feature  of  POI 

distribution of a typical residential area. 

On  the  other  hand,  form  the  data  of  traffic  flows,  it  was  observed  that  flows  of  departure  in 

weekdays of the regions peaked in the early morning(7-8 o’clock in morning rush hours) and the peak 

of flows of return appeared in the evening (17-19 o’clock in afternoon rush hours). But compared with 

C0, these regions had smaller flows which were about 1/4 of flows of C0, which have shown that these 

regions don’t have big traffic flows and still in a stage of developing. 

g. Unclassified area (sparse) 

16 

 
Some regions lack data of traffic flow for being covered with mountains, forests, rivers and others, 

so there are put in one category in this study. 

According to the results of functional identification, the area and population of  each functional 

area was collected, as shown in Table 3. 

Number of TAZ  Area(km2) 

Population(people) 

Table 3 Information of each cluster 

Functional area 

Unclassified(Spars） 

Mature residential area(C0) 

Under developed area(C1) 

Scenic area(C2) 

357 

63 

25 

155 

Commercial and entertainment area(C3)  129 

Area of public management, science, 
education and culture(C4) 

New residential area(C5) 

267 

122 

11061.13 

2561345 

326.2918 

82.10567 

973.0869 

2068.882 

572609 

162647 

1878303 

1911066 

918.993 

3551985 

974.2913 

1271898 

4.3 Examination of the results of identification 

In  order  to  test  the  accuracy  of  the  results  of  DZoF  model,  the  map  of  different  functional areas  in 

Beijing obtained from the study was compared with the map of land-use status quo in the overall urban 

planning of Beijing (2004-2020)5 and Google map of the area. Some results of comparison are shown as 

Table 4. 

Table 4 Comparison and analysis between Recognition results and the status quo of figure  

A famous scenic place in Beijing: Shidu Scenic Zone 

Contrast 
area 

Contrast 
diagram 

Identification 
results 

Region A(green) in the map of recognition results is a scenic area, which is in accord with region A in the 
map of land use status quo. 

Contrast 
area 

Culture relic protection site in Beijing: the ruins of the Turnoff City(which is 1.5km northwest of Badaling 
Guan City) 

Contrast 
diagram 

5 The data is from the urban planning institute of Beijing 

17 

 
 
 
                                                             
Identification 
results 

Region B(green) in the map of recognition results is a scenic area which corresponds to the location of the 
ruins of the Turnoff City 

A delta in the watersheds of Yongding River in Beijing city which is mostly woodland. 

Contrast 
area 

Contrast 
diagram 

Identification 
results 

Region C(green) in the map of recognition results belongs to an unclassified area, according with region C in 
the map of land use status quo which represents the delta of Yongding River. 

Contrast 
area 

Haidian District has many universities including Peking University, Tsinghua University and Renmin University 
of China as well as Chinese silicon valley, which is the region of science, education and culture in Beijing. 

Contrast 
diagram 

Identification 
results 

Region D(purple) in the map of land use status quo is the region of science, education and culture, which is 
in accord with region D in the map of recognition results. 

Contrast 
area 

some parts of Dongcheng District 

Contrast 
diagram 

Identification 
results 

In the map of recognition results, region E is a scenic area and region F is a commercial and entertainment 
area. And by comparing with Google map of the regions, region E is Ritan Park in reality and region F is 
actually a famous commercial and entertainment area in Beijing, which has a plenty of shopping centers like 
China World Mall, Traders Hotel, Jiali Mall and Wanda Plaza. 

Besides, we also compared results of the study with detailed land-use data of each TAZ in Beijing 

to test the overall accuracy of identification. After ranking 1118 TAZ according to the size of public land 

(including land of public facilities and municipal administration), selecting the top 50 TAZ and removing 

the TAZ without SCD information, there were a total of 44 TAZ left. 22 of them were identified as areas 

18 

 
 
 
 
 
of public management, science, education and culture with an accuracy rate of 50%. Using the same 

method, the residential land was analyzed and the accuracy rate was 58.06%. The result is as shown in 

table 5. 

Table 5 Comparison and analysis between Recognition results and land use of TAZ 

Valid contrasting data 

Identification 
results 

Area of public management, 
science, education and 
culture 

Residential area 

Number of TAZ 

44 

22 

Total area(m2) 

59596348 

19824488 

Number of TAZ 

31 

18 

Total area(m2) 

49319636 

15423667 

Accuracy 
rate 

50.00% 

58.06% 

From the overall consideration of the highly-mixed land use status of Beijing and the contrastive 

analysis  of  the  study,  DZoF  model  has  a  certain  degree  of  accuracy  in  effectively  identifying  main 

functional areas in Beijing. 

5 Conclusion and discussion 

This study is based on 77,976,010 records of SCD of Beijing City in one week in April 2008 and 113,810 

pieces  of  POI  data  of  Beijing  in  2010.  And  by  constructing  a  DZoF  model,  the  study  completed  the 

identification of functional areas in Beijing and obtained 7 kinds of functional areas which is area of 

public management and culture, scenic area, commercial and entertainment area, mature residential 

area, new residential area and unclassified area. The area of public management and culture covers 

267 transportation analysis zones (TAZ) with a total area of 918.993km2. Business and entertainment 

area covers 129 TAZ with a total area of 2068.882km2. And scenic area covers 155 TAZ with a total area 

of 973.0869 km2. 

The results show that DZoF model has certain ability to recognize the characteristic of functional 

areas in Beijing. This study can help people easily understand the spatial structure of a complex city, 

assist city planners to carry out planning of different urban functional areas based on human mobility 

and POI data, and provide the guidance and reference to city planning and site selection for real estate 

development. 

This research has potential innovation in three aspects: first, it studied the spatial structure of a 

city through human mobility based on massive SCD; second, it combined the traditional methods of 

urban studies and big data mining and identified the features of residents’ trip behavior from existing 

survey  data  of  residents’  trip,  and  applied  these  features  as  rules  to  the  identification  of  urban 

functional  area;  third,  it  constructed  a  DZoF  (discovering  zones  of  different  functions)  model  and 

identified the function of different regions in the city. As a whole, based on data of POI and SCD, the 

research  studied  the  dynamic  spatial  structure  of  city  using  data  mining  method,  providing  a  new 

analysis and research methods for studies of metropolitan spatial structure. 

19 

 
 
 
 
In this study, there are still some deficiencies that need to be improved in further researches: (1) 

the number of pick-up and drop-off passengers was chosen as an index in the study. But because of the 

unobtainable drop-off data of one-ticket lines, the study has ignored the data of one-ticket lines. New 

model can be built to effectively use data of one-ticket lines and improve the accuracy of recognition 

results in the future; (2) in 2010, the ratio of travelling by public bus in Beijing is 28.2%, while rail transit 

accounts for 11.5%, taxi for 6.6% and car for 34.2%6. So the data of bus have some limitations and one 

sidedness. In future researches, data of rail transit and taxi data can be added into the study to complete 

the information of human mobility and get more accurate results. (3) In real situation, mixed land use 

of commercial and residential services is widespread. The study ignored the possibility of mixed use 

and  selected  the  function  with  the  largest  percentage  to  represent  the  region  when  collecting 

experimental results on the TAZ scale. Classification of mixed land use can be added into the future 

study. 

References: 

Lai S-K, Han H (2009) Complex: the new ideas of urban planning. China-building Press, Beijing.(In Chinese) 
Batty M (2009) Cities as  Complex Systems: Scaling,  Interactions, Networks, Dynamics  and Urban Morphologies. 

Springer, Berlin, DE. 

Batty M (1990) Invisible cities. Environment and Planning B: Planning and Design (17):127-130. 
Neuhaus  F  (2009)  "Urban  diary-a  tracking  project"  UCL  working  paper  series.  Paper  151.  Available  on  line: 

http://discovery.ucl.ac.uk/19245/ 

Calabrese F, Ratti C (2006) Real time Rome. Networks and Communication Studies 20:247-258. 
Ratti C, Pulselli R M, Williams S, Frenchman D (2006) Mobile landscapes: Using location data from cell phones for 

urban analysis. Environment and Planning B: Planning and Design 33(5):727-748. 

Gonzalez M C, Hidalgo C A, Barabasi A L (2008) Understanding individual human mobility patterns. Nature 453: 779-

782. 

Goodchild  M  F,  Janelle  D.(1984)  The  city  around  the  clock:  Space-time  patterns  of  urban  ecological  structure. 

Environment and Planning A 16(6):807-820.     

Goodchild  M  F,  Klinkenberg  B,  Janelle  D  G  (1993)  A  factorial  model  of  aggregate  spatio-temporal  behavior: 

Application to the diurnal cycle. Geographical Analysis 5:277-294. 

Jiang B, Yin J, Zhao S (2009) Characterizing human mobility patterns in a large street network. Physical Review E 

80(2):1136-1146.  

Hamilton B W. Wasteful Commuting (1982). The Journal of Political Economy 90(5):1035-1053.  
Liu Zhilin, Wang Maojun(2011) Job accessibility and its impacts on commuting time of urban residents in Beijing: 

From a spatial mismatch perspective. Acta Geographica Sinica 66(4): 457-467. (In Chinese) 

Wang  D,  Chai  Y  (2009)  the  jobs-housing  relationship  and  commuting  in  Beijing,  China:  the  legacy  of  company. 

Journal of Transport Geography 17: 30-38. 

Anas A, Arnott R, Small K A (1998) Urban Spatial Structure. Journal of Economic Literature 36(3) 1426-1464. 
McMillen D P, McDonald J F (1997) A Nonparametric Analysis of Employment Density in a Polycentric City. Journal 

of Regional Science 37(4): 591-612.  

Lu D, Weng Q. (2005) Urban land-use and land-cover mapping using the full spectral information of Landsat ETM+ 

data in Indianapolis, Indiana. Photogrammetric Engineering & Remote Sensing 71(11):1275-1284. 

Xiao J, Shen Y, Ge J, et al (2006) Evaluating urban expansion and land use change in Shijiazhuang, China, by using 

GIS and remote sensing. Landscape and Urban Planning 75(1-2), 69-80. 

Qi G, Li X, Li S, et al.: Measuring Social Functions of City Regions from Large-scale Taxi Behaviors. In: The 9th IEEE 
International Conference on Pervasive Computing and Communications (PerCom'11), Work in Progress, Seattle, 
USA, 21-25 March 2011. 

Liu Y, Wang F H, Xiao Y, et al (2012) Urban land uses and traffic ‘source-sink areas’: Evidence from GPS-enabled taxi 

data in Shanghai. Landscape and Urban Planning 106:73-87. 

Pulliam H R (1988) Sources, sinks, and population regulation. American Naturalist 132:652-661. 

6 The data is from the 2011 report of transportation development of Beijing 

20 

 
                                                             
Yuan J, Zheng Y, Xie X.: Discovering Regions of Different Functions in a city Using Human Mobility and POIs. In: The 
18th ACM SigKdd Conference on Knowledge Discovery and Data Mining, Beijing, China, 12-16August, 2012. 
Sun L, Lee D, Erath A.: Using Smart Card Data to Extract Passenger’s Spatio-temporal Density and Train’s Trajectory 
of MRT System. In: ACM SIGKDD International Workshop on Urban Computing, Beijing, China, 12 August, 2012. 
CH J, Hwang C.: A Time-geographic analysis of trip trajectories and land use characteristics in Seoul metropolitan 
area  by  using  multidimensional  sequence  alignment  and  spatial  analysis.  In:  2010  AAG  Annual  Meeting, 
Washington, DC (2010). 

Long Ying, Zhang Yu, Cui Chenyin (2012) Identifying Communing Pattern of Beijing using Bus Smart Card Data. Acta 

Geographica Sinica 67(10):1-12. (In Chinese) 

Zhao  Weifeng, Li  Qingquan,  Li  Bijun (2011) Using  urban  POIs  data  extraction  hierarchical  landmarks. Journal Of 

Remote Sensing  (05):981-989. (In Chinese) 

Witten I H, Frank E (1999) Data Mining: Practical Machine Learning Tools and Techniques with Java Implementations. 

Morgan Kaufmann. 

Tan P-N, Steinbach M, Kumar V (2006) Introduction to Data Mining. Post&Telecom Press, Beijing, P2-7. 
Jiang S, Ferreira J, Gonzalez M C (2012) Clustering daily patterns of human activities in the city. Data Mining and 

Knowledge Discovery, April 23, 1-33. 

Sun J.B, Yuan J, Wang Y, et al (2011) Exploring space-time structure of human mobility in urban space. Physical A 

390:929-942. 

Jiang  S,  Ferreira  J,  Gonzalez  M.  Discovering  Urban  Spatial-Temporal  Structure  from  Human  Activity  Patterns. 

UrbComp'12, August 12, 2012. Beijing, China. 

Pan  G,  Qi  G,  Wu  Z,  et  al  (2013)  Land-use  Classification  Using  Taxi  GPS  Traces.  IEEE  Transactions  on  Intelligent 

Transportation Systems (T-ITS) 14(1):113-123. 

Agrawal R, Raloutsos C, Swami A.: Efficient Similarity Search in Sequence Databases. In: Proc of the 4th International 
Conference  on  Foundations  of  Data  Organization  and  Algorithms,  Berlin,  Germany,  p69-84.  Springer-Verlag, 
(1993) 

Sun Wenshuang, Chen Lanxiang (1994) Multivariate statistical analysis. Higher Education Press, Beijing.  
 Korn F, Jagadish H V, Faloutos C.: Efficiently Supporting Ad Hoc Queries in Large Datasets of Time Sequences. In: 

Proc. of the ACM SIGMOD International Conference on Management of Data, Tucson, USA, ACM, 1997. 

Jiang Yuan, Zhang Zhaoyang, Qiu Peiliang(2005) Clustering Algorithms Used in Data Mining. Journal of Electronics 

& Information Technology 27(4):655-659.(In Chinese) 

Huang  Libin  (2006).  City  rail  transit  sites  influence  evaluation  research  of  regional  development—In  Shanghai 

xujiahui rail hub. Tongji University. 

21 

 
 
